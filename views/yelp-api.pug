extends _layout

block content
    div.containerMain
        h3 Pratix Parikh
        p  Yelp Search API
        div(class="containerYelpAPI")
            form(class='form-inline' id="yelp-search" method='GET')
                div.searchForm2.w-75.d-flex.flex-row.justify-content-between
                    div.termBox.d-flex.flex-column.justify-content-around.ml-2
                        div.termBoxText What    
                        div.termBoxInput
                            input(type="text" class="inputForm" name="term" value=`${form.term || ""}` placeholder=`Term`)  
                    div.locationBox.d-flex.flex-column.justify-content-around
                        div.locationBoxText Where
                        div.locationBoxInput
                             input(type="text" class="inputForm" name="location" value=`${form.location || ""}` placeholder=`Location`)
                             div#location-feedback
                    div.limitBox.d-flex.flex-column.justify-content-around
                        div.limitBoxText How Many
                        div.limitBoxInput
                             input(type="text" class="inputForm" name="limit" value=`${form.limit || ""}` placeholder=`Limit`)
                    div.priceBox.d-flex.flex-column.justify-content-around
                        div.priceBoxText Price Range
                        div.priceBoxInput 
                            label(class="mr-sm-2" class="inputForm" for="inlineFormCustomSelect" name='price' value=`${form.price || ""}` placeholder=`Price`)
                                            select(class="custom-select mb-2 mr-sm-2 mb-sm-0" id="inlineFormCustomSelect")
                                                option Select...
                                                option(value="1") $+
                                                option(value="2") $$+
                                                option(value="3") $$$+
                                                option(value="4") $$$$
                    div.buttonBox.d-flex.flex-column.justify-content-around.mr-2
                        button(type="submit" class="btn btn-primary") Search
            //- div(class="row")
            //-     div(class='col')
            //-         div(class="containerYelp d-flex")
            //-             form(class='form-inline' id="yelp-search" method='GET')
            //-                 table.tableForm-r
            //-                     tr.formRow1
            //-                         th.formRowText What
            //-                         th.formRowText Where
            //-                         th.formRowText How Many 
            //-                         th.formRowText Price Range
            //-                         th(rowspan='2' class="formRowButton") 
            //-                             button(type="submit" class="btn btn-primary") Search
            //-                     tr.formRow2
            //-                         td.formRowInput
            //-                             input(type="text" class="inputForm" name="term" value=`${form.term || ""}` placeholder=`Term`)
            //-                         td.formRowInput
            //-                             input(type="text" class="inputForm" name="location" value=`${form.location || ""}` placeholder=`Location`)
            //-                             div#location-feedback
            //-                         td.formRowInput
            //-                             input(type="text" class="inputForm" name="limit" value=`${form.limit || ""}` placeholder=`Limit`)
            //-                         td.formRowInput2
            //-                             label(class="mr-sm-2" class="inputForm" for="inlineFormCustomSelect" name='price' value=`${form.price || ""}` placeholder=`Price`)
            //-                                 select(class="custom-select mb-2 mr-sm-2 mb-sm-0" id="inlineFormCustomSelect")
            //-                                     option Select...
            //-                                     option(value="1") $+
            //-                                     option(value="2") $$+
            //-                                     option(value="3") $$$+
            //-                                     option(value="4") $$$$

                    div(class='businessOutput')
                        if businesses.length > 0
                            table.table.businessTable-r
                                th.businessHead-r Business 
                                each business in businesses
                                    -console.log(businesses)
                                        tr.businessRow-r
                                            td= business.name

block page-scripts
    script(defer src="/script.js")
    script.
        $(document).ready(function() {
            $("#yelp-search").submit(function(e) {
                var location = document.querySelector('#yelp-search input[name="location"]').value
                if (!location) {
                    document.querySelector('#location-feedback').innerHTML = "Please provide a location"
                    e.preventDefault()
                } else {
                    document.querySelector('#location-feedback').innerHTML = ""
                }
            })
        })